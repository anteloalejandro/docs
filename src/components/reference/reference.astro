---
import Debug from 'astro/components/Debug.astro'
const unfilteredDocs = await Astro.glob('../../pages/docs/*.md')
const docs = unfilteredDocs.filter(d => !d.frontmatter.draft)
const url = Astro.url.pathname.lastIndexOf('/') == Astro.url.pathname.length - 1
  ? Astro.url.pathname.substring(0, Astro.url.pathname.length - 1)
  : Astro.url.pathname
---

<nav class="refs">
  <h3>Reference</h3>
  {docs.map(d => {
    const isCurrentDoc = url == d.url
    return <span>
      <a class={isCurrentDoc ? 'current-doc' : '' } href={d.url}>
        {d.frontmatter.title || d.url}
      </a>
    </span>
  })}
</nav>

<style lang="scss">
  nav.refs {
    text-align: center;
    background-color: var(--bg-3);
  }

  span {
    display: block;
    margin-block: .2rem;
    a {
      display: block;
      height: 100%;
      padding: .5rem;
      text-decoration: none;
      border-radius: var(--radius);
      &.current-doc {
        background-color: var(--hl-1);
        color: var(--platinum);
      }
    }
  }
</style>
